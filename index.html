<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("BY6cSR7LfHerG691t");
</script>

<!DOCTYPE html>
<html lang="es">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Staatliches&display=swap" rel="stylesheet">
<!-- favicon –¥–ª—è PNG -->
<link rel="icon" type="image/png" href="img/favicon_32x32.png">

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Generadora R√°pida</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
      
      @keyframes marquee {
  0% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

#overlay {
  display: none;
  z-index: 500;
}

    .text-info {
  pointer-events: none;
}
  
      

.invert {
  filter: invert(1);
}




  /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
.text-info {
  position: fixed; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ */
  bottom: 190px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É, –∫–∞–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
  left: 300px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è */
  color: #ffffff; /* –ë–µ–ª—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
  font-family: 'Staatliches', sans-serif; /* –ü—Ä–∏–º–µ–Ω—è–µ–º —à—Ä–∏—Ñ—Ç */
  font-size: 0rem; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
  font-weight: bold; /* –ü–æ–ª—É–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç */
  text-align: left; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
 /* background-color: rgba(0, 0, 0, 00); /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
 /* padding: 10px 20px; /* –û—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ —Ç–µ–∫—Å—Ç–∞ */
 /* border-radius: 8px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ —Ñ–æ–Ω–∞ */
 /* box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* –¢–µ–Ω—å –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
  z-index: 1000; /* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –ø–æ–≤–µ—Ä—Ö –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
line-height: 40px;
}

/* –ú–µ–¥–∏–∞–∑–∞–ø—Ä–æ—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (min-width: 1024px) {
  .text-info {
    font-size: 2.8rem; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –µ—â–µ –±–æ–ª—å—à–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    
  }

  .my-button {
    font-size: 1.8rem; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∫–Ω–æ–ø–∫–∏ */
    padding: 30px 60px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏ */
  }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
  .text-info {
    font-size: 2.3rem; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    bottom: 120px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    left: 10px; /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
line-height: 30px;
  }

  .my-button {
    font-size: 2rem; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∫–Ω–æ–ø–∫–∏ */
    padding: 16px 30px; /* –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏ */
  }
}




    *,
    *::before,
    *::after {
      box-sizing: border-box; /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –æ—Ç—Å—Ç—É–ø—ã –∏ —Ä–∞–º–∫–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
    }

    body, html {
      height: 100%; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É 100% */
      margin: 0;    /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
      padding: 0;   /* –£–±–∏—Ä–∞–µ–º –ø–∞–¥–¥–∏–Ω–≥–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
      overflow-x: hidden; /* –°–∫—Ä—ã—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
      overflow-y: hidden; /* –°–∫—Ä—ã—Ç—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    .container {
      height: 100%;  /* –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—Å—é –≤—ã—Å–æ—Ç—É —ç–∫—Ä–∞–Ω–∞ */
      display: flex; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º flexbox –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    /* –ö–Ω–æ–ø–∫–∞ –≤ –Ω–∏–∂–Ω–µ–º –ª–µ–≤–æ–º —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞ */
    .my-button {
      position: fixed; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ */
      bottom: 100px;    /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
      left: 300px;      /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ */
      padding: 24px 46px; /* –û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
      background-color: transparent; /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
      color: white; /* –ë–µ–ª—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
      font-weight: 600; /* –ü–æ–ª—É–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç */
      font-size: 0.875rem; /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ 14px */
      border: 0.5px solid white; /* –ë–µ–ª–∞—è –æ–±–≤–æ–¥–∫–∞ */
      border-radius: 2px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
      cursor: pointer; /* –ö—É—Ä—Å–æ—Ä –Ω–∞ –∫–Ω–æ–ø–∫–µ */
      transition: background-color 0.3s ease, color 0.3s ease; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–ª—è —Ñ–æ–Ω–∞ –∏ —Ü–≤–µ—Ç–∞ */
      z-index: 1000; /* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –Ω–∞ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ */
    }

    /* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    .my-button:hover {
      background-color: rgba(255, 255, 255, 0.39); /* –ë–µ–ª—ã–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
      color: #f8cfff; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }

    /* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –º–µ–Ω—å—à–∏–º–∏ —ç–∫—Ä–∞–Ω–∞–º–∏ */
    @media (max-width: 768px) {
      body, html {
        height: 100%; /* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã—Å–æ—Ç–∞ 100% */
      }

      .my-button {
        width: 90%; /* –£–º–µ–Ω—å—à–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        bottom: 10px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        left: 50%; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É */
        transform: translateX(-50%); /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ */
      }
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ */
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    .animate-marquee {
      display: inline-block;
      white-space: nowrap;
      animation: marquee 70s linear infinite; /* –£–≤–µ–ª–∏—á—å—Ç–µ –≤—Ä–µ–º—è –¥–ª—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è */
    }

    /* –õ–æ–≥–æ—Ç–∏–ø –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    #logo-container {
      position: absolute;
      top: 2px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 48;
    }

    #logo-container img {
      max-width: 50px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –ª–æ–≥–æ—Ç–∏–ø–∞ */
      filter: invert(1); /* –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –Ω–∞ –±–µ–ª—ã–π */
    }

    /* –¢–æ–Ω–∫–∞—è –±–µ–ª–∞—è –ª–∏–Ω–∏—è –ø–æ–¥ –ª–æ–≥–æ */
    #line {
      width: 100%;
      height: 0.2px;
      background-color: white;
      margin-top: 20px; /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ª–æ–≥–æ—Ç–∏–ø–æ–º –∏ –ª–∏–Ω–∏–µ–π */
      position: absolute;
      top: 120px; /* –ü–æ–∑–∏—Ü–∏—è –ª–∏–Ω–∏–∏ */
      z-index: 49;
      opacity: 30%;
    }

    /* –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ */
    .marquee-container {
  position: absolute;
  top: 85px; /* –∏–ª–∏ —É–±–µ—Ä–∏ top –∏ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
  width: 100%;
  padding: 0 10px;
  z-index: 10;
  opacity: 1;
}


    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
    @keyframes slideIn {
      from {
        right: -100%;
        opacity: 0;
      }
      to {
        right: 0;
        opacity: 1;
      }
    }

    /* –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã */
    #form-panel {
      animation: slideIn 0.8s ease-out forwards;
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 400px;
      background-color: white;
      padding: 20px;
      height: 100%;
      z-index: 9999;
      opacity: 0;
      transition: all 0.8s ease-out;
    }

    /* –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è —Ñ–æ–Ω–∞ */
    .overlay-dark {
      background-color: rgba(0, 0, 0, 0.5);
      opacity: 0;
      transition: opacity 0.3s ease;
        
    }

    /* –ö–æ–≥–¥–∞ —Ñ–æ—Ä–º–∞ –∏ —Ñ–æ–Ω –≤–∏–¥–Ω—ã */
    #form-panel.show {
      right: 0;
      opacity: 1;
    }

    .overlay-dark.show {
      opacity: 1;
    }

      
      

    /* –°–∏–Ω–∏–µ —á–µ–∫–±–æ–∫—Å—ã */
input[type="checkbox"].price {
  accent-color: #3b82f6; /* Tailwind —Å–∏–Ω–∏–π: blue-500 */
}
  
      
      
      
      
      

  </style>
</head>
<body class="relative w-full min-h-screen overflow-hidden text-white">
    
    
    

    
    
    <!-- –í–ï–†–•–ù–ò–ô –ë–õ–û–ö -->
<!-- –í–ï–†–•–ù–ò–ô –ë–õ–û–ö -->
<header id="top-bar" class="absolute top-0 left-0 w-full z-10 bg-black bg-opacity-30 backdrop-blur-sm">
  <div class="flex flex-col items-center text-center py-4 px-4"> <!-- –æ—Ç—Å—Ç—É–ø—ñ —Å–≤–µ–∑—Ö—É –∏ —Å –Ω–∏–∑—É -->


    <!-- –õ–û–ì–û–¢–ò–ü -->
    <div class="flex justify-center items-center w-full z-20">
      <img src="img/lg.png" alt="Logo Generadora" class="h-14 object-contain invert" />
    </div>

  </div>

  <!-- üîß –ù–ò–ñ–ù–Ø–Ø –ì–†–ê–ù–ò–¶–ê –° –ë–ï–ì–£–©–ï–ô –°–¢–†–û–ö–û–ô -->
  <div class="w-full relative z-20 border-t border-white border-opacity-30">
    <div class="overflow-hidden whitespace-nowrap">
      
    </div>
  </div>
</header>

<div class="marquee-container mt-[4px]">
  <span class="animate-marquee text-sm uppercase tracking-wide inline-block px-4 py-1">
    GRANADA Entrega R√°pida MALAGA MARBELLA TORREMOLINOS BENALMADENA NERJA ALMU√ë√âCAR SALOBRE√ëA MIJAS FUENGIROLA ESTEPONA VEJER DE LA FRONTERA RONDA ANTEQUERA COSTA DEL SOL COSTA TROPICAL COSTA DE ALMER√çA...
  </span>
</div>



  

 
    
  <div class="absolute w-full h-full z-0" id="video-container">
  <video autoplay muted loop playsinline class="w-full h-full object-cover">
    <source src="img/screen2.mp4" type="video/mp4" />
    <img src="fallback.jpg" alt="Fallback" class="w-full h-full object-cover" />
  </video>
  <div id="overlay" class="absolute inset-0 bg-black bg-opacity-50 transition-opacity" style="display: none;"></div>
</div>


  
  
  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="relative z-20 flex flex-col items-center justify-center text-center min-h-screen px-4">
    
    
    <div class="relative z-20 flex flex-col items-center justify-center text-center min-h-screen px-4">
  <p class="mt-4 text-base max-w-md pointer-events-none select-none">
  Desde <strong>19‚Ç¨</strong> al d√≠a ‚Äî entrega urgente 24/7
</p>
<h1 class="text-info select-none">
  GENERADORES EL√âCTRICOS PARA ALQUILER <br>SILENCIOSOS/POTENTES/LISTOS PARA TRABAJAR 3200-7500 W
</h1>
<button id="reservarBtn1" onclick="openFormPanel()" class="my-button">
  RESERVAR AHORA
</button>

</div>

    

  
    
    
    
    
    
    
   <!-- –§–æ—Ä–º–∞ -->
<div id="form-panel" class="hidden fixed top-0 right-0 w-full sm:max-w-md h-full bg-white text-black z-50 flex flex-col">

  <!-- –í–ï–†–• (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) -->
  <div class="shrink-0 sticky top-0 z-10 bg-white p-6 border-b border-gray-200">
    <button type="button" onclick="closeFormPanel()" class="absolute top-4 right-4 text-3xl font-bold text-gray-500 hover:text-gray-700">
      &times;
    </button>
    <h2 class="text-xl font-bold mb-2 text-center">RESERVA TU GENERADOR</h2>
    <div class="text-lg font-bold text-center mb-1">Total: <span id="total">0</span>‚Ç¨</div>
    <div class="text-md font-semibold text-center">D√≠as seleccionados: <span id="dayCount">1</span></div>
  </div>

  <!-- –°–†–ï–î–ò–ù–ê (–ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è) -->
  <div class="flex-1 overflow-y-auto p-6">
    <form id="reservaForm" onsubmit="handleSubmit(event)" oninput="calculateTotal(); actualizarServicios();" class="space-y-4 text-left" autocomplete="on">
      <input type="hidden" name="order_id" id="orderId">

      <label class="block">Ciudad:
        <select id="ciudad" name="ciudad" class="border p-1 w-full" onchange="actualizarServicios()">
          <option value="granada">Granada</option>
          <option value="malaga">M√°laga</option>
          <option value="marbella">Marbella</option>
        </select>
      </label>

      <div>
        <p class="font-semibold">Elige tu generador:</p>
        <label><input type="checkbox" class="price" name="generador[]" value="19"> 3200W (19‚Ç¨/d√≠a)</label><br>
        <label><input type="checkbox" class="price" name="generador[]" value="29"> 5500W (29‚Ç¨/d√≠a)</label><br>
        <label><input type="checkbox" class="price" name="generador[]" value="39"> 7500W (39‚Ç¨/d√≠a)</label>
      </div>

      <div>
        <p class="font-semibold">Accesorios:</p>
        <label><input type="checkbox" class="price" name="accesorio[]" value="5"> Alargador 10m (+5‚Ç¨)</label><br>
        <label><input type="checkbox" class="price" name="accesorio[]" value="10"> Alargador 25m (+10‚Ç¨)</label><br>
        <label><input type="checkbox" class="price" name="accesorio[]" value="12"> Bid√≥n 5L (+12‚Ç¨)</label><br>
        <label><input type="checkbox" class="price" name="accesorio[]" value="3"> Adaptador (+3‚Ç¨)</label>
      </div>

      <div id="servicios">
        <p class="font-semibold">Servicios:</p>
        <label data-ciudad="granada"><input type="checkbox" class="price" name="servicio[]" value="50"> Entrega en Granada (+50‚Ç¨)</label><br>
        <label data-ciudad="malaga"><input type="checkbox" class="price" name="servicio[]" value="80"> Entrega en M√°laga (+80‚Ç¨)</label><br>
        <label data-ciudad="marbella"><input type="checkbox" class="price" name="servicio[]" value="150"> Entrega en Marbella (+150‚Ç¨)</label>
      </div>

      <label>Inicio:<input type="date" id="startDate" name="inicio" class="border p-1 w-full" autocomplete="off"></label>
      <label>Fin:<input type="date" id="endDate" name="fin" class="border p-1 w-full" autocomplete="off"></label>

      <input type="hidden" name="dias" id="hiddenDays">
      <input type="hidden" name="total" id="hiddenTotal">

      <label>Nombre:<input type="text" name="nombre" class="border p-1 w-full" required autocomplete="name"></label>
      <label>Email:<input type="email" name="email" class="border p-1 w-full" required autocomplete="email"></label>
      <label>Tel√©fono:<input type="tel" name="telefono" class="border p-1 w-full" required autocomplete="tel" pattern="^(\+34|0034|34)?[6-9]\d{8}$" placeholder="Ej: 612345678"></label>
      <label>Comentarios:<textarea name="comentario" class="border p-1 w-full"></textarea></label>
    </form>
  </div>

  <!-- –ù–ò–ó (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) -->
  <div class="shrink-0 sticky bottom-0 z-10 bg-white p-4 border-t border-gray-200">
    <button type="submit" form="reservaForm" class="w-full bg-green-600 text-white py-2 rounded" id="submitBtn">
      Enviar solicitud
    </button>
    <div id="thanks" class="hidden mt-2 text-green-700 font-semibold text-center">¬°Gracias! Tu solicitud ha sido enviada.</div>
  </div>

</div>


  <script>
    function pad(n) { return n < 10 ? '0' + n : n; }

    function closeFormPanel() {
      document.getElementById('form-panel').classList.remove('show');
      document.getElementById('overlay').classList.remove('show');
      document.getElementById('form-panel').classList.add('hidden');
      document.getElementById('overlay').classList.add('hidden');
        document.getElementById('overlay').style.display = 'none';

    }

    function setDefaultDates() {
  const today = new Date();
  const tomorrow = new Date(today);
  const afterTomorrow = new Date(today);

  tomorrow.setDate(today.getDate() + 1);
  afterTomorrow.setDate(today.getDate() + 2);

  document.getElementById('startDate').value = formatDate(tomorrow);
  document.getElementById('startDate').min = formatDate(tomorrow);

  document.getElementById('endDate').value = formatDate(afterTomorrow);
  document.getElementById('endDate').min = formatDate(afterTomorrow);
}

      
      function controlarRangoDeFechas() {
  const startInput = document.getElementById('startDate');
  const endInput = document.getElementById('endDate');

  startInput.addEventListener('change', () => {
    const start = new Date(startInput.value);
    const end = new Date(endInput.value);

    if (endInput.value && (start >= end)) {
      end.setDate(start.getDate() + 1);
      endInput.value = formatDate(end);
    }
    endInput.min = formatDate(new Date(start.getTime() + 24 * 60 * 60 * 1000));
    calculateTotal();
  });

  endInput.addEventListener('change', () => {
    const start = new Date(startInput.value);
    const end = new Date(endInput.value);

    if (startInput.value && (end <= start)) {
      start.setDate(end.getDate() - 1);
      startInput.value = formatDate(start);
    }
    startInput.max = formatDate(new Date(end.getTime() - 24 * 60 * 60 * 1000));
    calculateTotal();
  });
}

// –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã YYYY-MM-DD
function formatDate(date) {
  return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;
}

      
      

    function calculateTotal() {
      let total = 0;
      let days = 1;
      const start = document.getElementById('startDate').value;
      const end = document.getElementById('endDate').value;
      if (start && end) {
        const d1 = new Date(start);
        const d2 = new Date(end);
        const diff = (d2 - d1) / (1000 * 3600 * 24);
        if (diff >= 1) days = diff + 1;
      }
      document.getElementById('dayCount').innerText = days;
      document.querySelectorAll('.price:checked').forEach(input => {
        const price = parseFloat(input.value);
        if (input.name.includes('generador')) total += price * days;
        else total += price;
      });
      document.getElementById('total').innerText = total;
      document.getElementById('hiddenDays').value = days;
      document.getElementById('hiddenTotal').value = total;
    }

    function actualizarServicios() {
      const ciudad = document.getElementById('ciudad').value;
      document.querySelectorAll('#servicios label').forEach(label => {
        const ciudades = label.getAttribute('data-ciudad');
        if (!ciudades.includes(ciudad)) {
          label.style.display = 'none';
          label.querySelector('input').checked = false;
        } else {
          label.style.display = 'block';
        }
      });
    }

    function getCheckedText(name) {
      return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`))
        .map(el => el.parentNode.textContent.trim())
        .join(', ') || '‚Äî';
    }

    function generateOrderId() {
      return 'ORD-' + Date.now();
    }

    function openFormPanel() {
      setDefaultDates();
      calculateTotal();
      actualizarServicios();
      const orderId = generateOrderId();
      document.getElementById('orderId').value = orderId;

      document.getElementById('form-panel').classList.remove('hidden');
      document.getElementById('form-panel').classList.add('show');
      document.getElementById('overlay').classList.remove('hidden');
      document.getElementById('overlay').classList.add('show');
        document.getElementById('overlay').style.display = 'block';

    }

    document.getElementById('form-panel').addEventListener('click', function (e) {
  if (e.target.id === 'overlay') {
    closeFormPanel();
  }
});


    function handleSubmit(e) {
      e.preventDefault();
      const form = e.target;

      const generadorSelected = form.querySelectorAll('input[name="generador[]"]:checked').length > 0;
      if (!generadorSelected) {
        alert("Por favor, elige al menos un generador.");
        return;
      }

      const startDate = form.startDate.value;
      const endDate = form.endDate.value;
      if (!startDate || !endDate) {
        alert("Por favor, selecciona las fechas de inicio y fin.");
        return;
      }

      const telefono = form.telefono.value;
      const telefonoPattern = /^(\+34|0034|34)?[6-9]\d{8}$/;
      if (!telefonoPattern.test(telefono)) {
        alert("Por favor, introduce un n√∫mero de tel√©fono v√°lido (Ej: 612345678, +34612345678).");
        return;
      }

      const email = form.email.value;
      const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      if (!emailPattern.test(email)) {
        alert("Por favor, introduce un email v√°lido.");
        return;
      }

      form.querySelector('[name="message"]')?.remove();

      if (!form.nombre.value || !form.email.value || !form.telefono.value) {
        alert('Por favor, completa los campos obligatorios: Nombre, Email y Tel√©fono.');
        return;
      }

      const message = `Pedido ID: ${form.order_id.value}\n\nüìç Ciudad: ${form.ciudad.value}\n‚ö° Generador: ${getCheckedText('generador[]')}\nüîå Accesorios: ${getCheckedText('accesorio[]')}\nüõ† Servicios: ${getCheckedText('servicio[]')}\n\nüìÖ Desde: ${form.inicio.value} hasta ${form.fin.value} (${form.dias.value} d√≠as)\nüí∞ Total: ${form.total.value} ‚Ç¨\n\nüë§ Nombre: ${form.nombre.value}\nüìß Email: ${form.email.value}\nüì± Tel√©fono: ${form.telefono.value}\n\nüìù Comentarios:\n${form.comentario.value}`;

      const hidden = document.createElement('input');
      hidden.type = 'hidden';
      hidden.name = 'message';
      hidden.value = message;
      form.appendChild(hidden);

      emailjs.sendForm('service_eo8h1od', 'template_2jiijw2', form)
        .then(() => {
          document.getElementById('thanks').classList.remove('hidden');
          setTimeout(() => {
            document.getElementById('form-panel').classList.add('hidden');
            document.getElementById('overlay').classList.remove('overlay-dark');
            document.getElementById('thanks').classList.add('hidden');
            form.reset();
            calculateTotal();
            actualizarServicios();
          }, 3000);
        })
        .catch(err => alert('Error: ' + JSON.stringify(err)));
    }

    window.onload = () => {
  setDefaultDates();
  calculateTotal();
  actualizarServicios();
  controlarRangoDeFechas(); // ‚¨ÖÔ∏è –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–∑–æ–≤
};

  </script>
      
      
      
      
</body>
</html>
